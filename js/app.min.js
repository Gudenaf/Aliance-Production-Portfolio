(()=>{"use strict";const e={};let t=!0,s=(e=500)=>{let s=document.querySelector("body");if(t){let o=document.querySelectorAll("[data-lp]");setTimeout((()=>{for(let e=0;e<o.length;e++){o[e].style.paddingRight="0px"}s.style.paddingRight="0px",document.documentElement.classList.remove("lock")}),e),t=!1,setTimeout((function(){t=!0}),e)}},o=(e=500)=>{let s=document.querySelector("body");if(t){let o=document.querySelectorAll("[data-lp]");for(let e=0;e<o.length;e++){o[e].style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px"}s.style.paddingRight=window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px",document.documentElement.classList.add("lock"),t=!1,setTimeout((function(){t=!0}),e)}};function n(e){return e.filter((function(e,t,s){return s.indexOf(e)===t}))}e.popup=new class{constructor(e){let t={logging:!0,init:!0,attributeOpenButton:"data-popup",attributeCloseButton:"data-close",classes:{popup:"popup",popupWrapper:"popup__wrapper",popupContent:"popup__content",popupActive:"popup_show",bodyActive:"popup-show"},focusCatch:!0,closeEsc:!0,bodyLock:!0,hashSettings:{location:!0,goHash:!0},on:{beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){}}};this.isOpen=!1,this.targetOpen={selector:!1,element:!1},this.previousOpen={selector:!1,element:!1},this.lastClosed={selector:!1,element:!1},this._dataValue=!1,this.hash=!1,this._reopen=!1,this._selectorOpen=!1,this.lastFocusEl=!1,this._focusEl=["a[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"button:not([disabled]):not([aria-hidden])","select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","area[href]","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],this.options=Object.assign(t,e),this.options={...t,...e,classes:{...t.classes,...e?.classes},hashSettings:{...t.hashSettings,...e?.hashSettings},on:{...t.on,...e?.on}},this.bodyLock=!1,this.options.init&&this.initPopups()}initPopups(){this.eventsPopup()}eventsPopup(){document.addEventListener("click",function(e){const t=e.target.closest(`[${this.options.attributeOpenButton}]`);if(t)return e.preventDefault(),this._dataValue=t.getAttribute(this.options.attributeOpenButton)?t.getAttribute(this.options.attributeOpenButton):"error","error"!==this._dataValue?(this.isOpen||(this.lastFocusEl=t),this.targetOpen.selector=`${this._dataValue}`,this._selectorOpen=!0,void this.open()):void 0;return e.target.closest(`[${this.options.attributeCloseButton}]`)||!e.target.closest(`.${this.options.classes.popupContent}`)&&this.isOpen?(e.preventDefault(),void this.close()):void 0}.bind(this)),document.addEventListener("keydown",function(e){if(this.options.closeEsc&&27==e.which&&"Escape"===e.code&&this.isOpen)return e.preventDefault(),void this.close();this.options.focusCatch&&9==e.which&&this.isOpen&&this._focusCatch(e)}.bind(this)),this.options.hashSettings.goHash&&(window.addEventListener("hashchange",function(){window.location.hash?this._openToHash():this.close(this.targetOpen.selector)}.bind(this)),window.addEventListener("load",function(){window.location.hash&&this._openToHash()}.bind(this)))}open(e){t&&(this.bodyLock=!(!document.documentElement.classList.contains("lock")||this.isOpen),e&&"string"==typeof e&&""!==e.trim()&&(this.targetOpen.selector=e,this._selectorOpen=!0),this.isOpen&&(this._reopen=!0,this.close()),this._selectorOpen||(this.targetOpen.selector=this.lastClosed.selector),this._reopen||(this.previousActiveElement=document.activeElement),this.targetOpen.element=document.querySelector(this.targetOpen.selector),this.targetOpen.element&&(this.options.hashSettings.location&&(this._getHash(),this._setHash()),this.options.on.beforeOpen(this),document.dispatchEvent(new CustomEvent("beforePopupOpen",{detail:{popup:this}})),this.targetOpen.element.classList.add(this.options.classes.popupActive),document.documentElement.classList.add(this.options.classes.bodyActive),this._reopen?this._reopen=!1:!this.bodyLock&&o(),this.targetOpen.element.setAttribute("aria-hidden","false"),this.previousOpen.selector=this.targetOpen.selector,this.previousOpen.element=this.targetOpen.element,this._selectorOpen=!1,this.isOpen=!0,setTimeout((()=>{this._focusTrap()}),50),this.options.on.afterOpen(this),document.dispatchEvent(new CustomEvent("afterPopupOpen",{detail:{popup:this}}))))}close(e){e&&"string"==typeof e&&""!==e.trim()&&(this.previousOpen.selector=e),this.isOpen&&t&&(this.options.on.beforeClose(this),document.dispatchEvent(new CustomEvent("beforePopupClose",{detail:{popup:this}})),this.previousOpen.element.classList.remove(this.options.classes.popupActive),this.previousOpen.element.setAttribute("aria-hidden","true"),this._reopen||(document.documentElement.classList.remove(this.options.classes.bodyActive),!this.bodyLock&&s(),this.isOpen=!1),this._removeHash(),this._selectorOpen&&(this.lastClosed.selector=this.previousOpen.selector,this.lastClosed.element=this.previousOpen.element),this.options.on.afterClose(this),document.dispatchEvent(new CustomEvent("afterPopupClose",{detail:{popup:this}})),setTimeout((()=>{this._focusTrap()}),50))}_getHash(){this.options.hashSettings.location&&(this.hash=this.targetOpen.selector.includes("#")?this.targetOpen.selector:this.targetOpen.selector.replace(".","#"))}_openToHash(){let e=document.querySelector(`.${window.location.hash.replace("#","")}`)?`.${window.location.hash.replace("#","")}`:document.querySelector(`${window.location.hash}`)?`${window.location.hash}`:null;(document.querySelector(`[${this.options.attributeOpenButton} = "${e}"]`)?document.querySelector(`[${this.options.attributeOpenButton} = "${e}"]`):document.querySelector(`[${this.options.attributeOpenButton} = "${e.replace(".","#")}"]`))&&e&&this.open(e)}_setHash(){history.pushState("","",this.hash)}_removeHash(){history.pushState("","",window.location.href.split("#")[0])}_focusCatch(e){const t=this.targetOpen.element.querySelectorAll(this._focusEl),s=Array.prototype.slice.call(t),o=s.indexOf(document.activeElement);e.shiftKey&&0===o&&(s[s.length-1].focus(),e.preventDefault()),e.shiftKey||o!==s.length-1||(s[0].focus(),e.preventDefault())}_focusTrap(){const e=this.previousOpen.element.querySelectorAll(this._focusEl);!this.isOpen&&this.lastFocusEl?this.lastFocusEl.focus():e[0].focus()}}({});let r=(e,t=!1,o=500,n=0)=>{const r=document.querySelector(e);if(r){let e="",i=0;t&&(e="header.header",i=document.querySelector(e).offsetHeight);let a={speedAsDuration:!0,speed:o,header:e,offset:n,easing:"easeOutQuad"};document.documentElement.classList.contains("menu-open")&&(s(),document.documentElement.classList.remove("menu-open")),"undefined"!=typeof SmoothScroll&&(new SmoothScroll).animateScroll(r,"",a)}};let i={getErrors(e){let t=0,s=e.querySelectorAll("*[data-required]");return s.length&&s.forEach((e=>{null===e.offsetParent&&"SELECT"!==e.tagName||e.disabled||(t+=this.validateInput(e))})),t},validateInput(e){let t=0;return"email"===e.dataset.required?(e.value=e.value.replace(" ",""),this.emailTest(e)?(this.addError(e),t++):this.removeError(e)):("checkbox"!==e.type||e.checked)&&e.value.trim()?this.removeError(e):(this.addError(e),t++),t},addError(e){e.classList.add("_form-error"),e.parentElement.classList.add("_form-error");let t=e.parentElement.querySelector(".form__error");t&&e.parentElement.removeChild(t),e.dataset.error&&e.parentElement.insertAdjacentHTML("beforeend",`<div class="form__error">${e.dataset.error}</div>`)},removeError(e){e.classList.remove("_form-error"),e.parentElement.classList.remove("_form-error"),e.parentElement.querySelector(".form__error")&&e.parentElement.removeChild(e.parentElement.querySelector(".form__error"))},formClean(t){t.reset(),setTimeout((()=>{let s=t.querySelectorAll("input,textarea");for(let e=0;e<s.length;e++){const t=s[e];t.parentElement.classList.remove("_form-focus"),t.classList.remove("_form-focus"),i.removeError(t)}let o=t.querySelectorAll(".checkbox__input");if(o.length>0)for(let e=0;e<o.length;e++){o[e].checked=!1}if(e.select){let s=t.querySelectorAll(".select");if(s.length)for(let t=0;t<s.length;t++){const o=s[t].querySelector("select");e.select.selectBuild(o)}}}),0)},emailTest:e=>!/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,8})+$/.test(e.value)};window.addEventListener("load",(function(e){document.querySelector(".swiper")&&(new Swiper(".quality",{observer:!0,observeParents:!0,slidesPerView:"auto",spaceBetween:0,speed:800,navigation:{prevEl:".quality-btn-prev",nextEl:".quality-btn-next"}}),new Swiper(".step",{observer:!0,observeParents:!0,slidesPerView:"auto",spaceBetween:30,speed:800,navigation:{prevEl:".step-btn-prev",nextEl:".step-btn-next"}}),new Swiper(".blog__slider",{observer:!0,observeParents:!0,speed:800,breakpoints:{320:{slidesPerView:1,spaceBetween:30},1469.98:{slidesPerView:2,spaceBetween:30}},navigation:{prevEl:".blog-btn-prev",nextEl:".blog-btn-next"}}),new Swiper(".center__slider",{observer:!0,observeParents:!0,speed:500,loop:!0,noSwiping:!0,noSwipingClass:"center__slide",breakpoints:{320:{slidesPerView:1,spaceBetween:10},991.98:{slidesPerView:2,spaceBetween:20},1469.98:{slidesPerView:2,spaceBetween:30}},navigation:{prevEl:".center-btn-prev",nextEl:".center-btn-next"}}))}));e.watcher=new class{constructor(e){this.config=Object.assign({logging:!0},e),this.observer,!document.documentElement.classList.contains("watcher")&&this.scrollWatcherRun()}scrollWatcherUpdate(){this.scrollWatcherRun()}scrollWatcherRun(){document.documentElement.classList.add("watcher"),this.scrollWatcherConstructor(document.querySelectorAll("[data-watch]"))}scrollWatcherConstructor(e){if(e.length){n(Array.from(e).map((function(e){return`${e.dataset.watchRoot?e.dataset.watchRoot:null}|${e.dataset.watchMargin?e.dataset.watchMargin:"0px"}|${e.dataset.watchThreshold?e.dataset.watchThreshold:0}`}))).forEach((t=>{let s=t.split("|"),o={root:s[0],margin:s[1],threshold:s[2]},n=Array.from(e).filter((function(e){let t=e.dataset.watchRoot?e.dataset.watchRoot:null,s=e.dataset.watchMargin?e.dataset.watchMargin:"0px",n=e.dataset.watchThreshold?e.dataset.watchThreshold:0;if(String(t)===o.root&&String(s)===o.margin&&String(n)===o.threshold)return e})),r=this.getScrollWatcherConfig(o);this.scrollWatcherInit(n,r)}))}}getScrollWatcherConfig(e){let t={};if(document.querySelector(e.root)&&(t.root=document.querySelector(e.root)),t.rootMargin=e.margin,!(e.margin.indexOf("px")<0&&e.margin.indexOf("%")<0))return"prx"===e.threshold||(e.threshold=e.threshold.split(",")),t.threshold=e.threshold,t}scrollWatcherCreate(e){this.observer=new IntersectionObserver(((e,t)=>{e.forEach((e=>{this.scrollWatcherCallback(e,t)}))}),e)}scrollWatcherInit(e,t){this.scrollWatcherCreate(t),e.forEach((e=>this.observer.observe(e)))}scrollWatcherIntersecting(e,t){e.isIntersecting?!t.classList.contains("_watcher-view")&&t.classList.add("_watcher-view"):t.classList.contains("_watcher-view")&&t.classList.remove("_watcher-view")}scrollWatcherOff(e,t){t.unobserve(e)}scrollWatcherCallback(e,t){const s=e.target;this.scrollWatcherIntersecting(e,s),s.hasAttribute("data-watch-once")&&e.isIntersecting&&this.scrollWatcherOff(s,t),document.dispatchEvent(new CustomEvent("watcherCallback",{detail:{entry:e}}))}}({});let a=!1;function l(e){if(this.el=this.getElement(e.selector),!this.el)return console.log("Что-то не так с селектором");this.layout=e.layout||"+_ (___) ___-__-__",this.maskreg=this.getRegexp(),this.setListeners()}setTimeout((()=>{if(a){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0),window.addEventListener("DOMContentLoaded",(function(){var e=document.querySelectorAll('input[type="tel"]');Array.prototype.forEach.call(e,(function(e){new l({selector:e,layout:e.dataset.mask})}))})),l.prototype.getRegexp=function(){var e=this.layout.replace(/_/g,"\\d");return e=(e=(e=(e=e.replace(/\(/g,"\\(")).replace(/\)/g,"\\)")).replace(/\+/g,"\\+")).replace(/\s/g,"\\s")},l.prototype.mask=function(e){var t=e.target,s=this.layout,o=0,n=s.replace(/\D/g,""),r=t.value.replace(/\D/g,"");(n.length>=r.length&&(r=n),t.value=s.replace(/./g,(function(e){return/[_\d]/.test(e)&&o<r.length?r.charAt(o++):o>=r.length?"":e})),"blur"==e.type)?new RegExp(this.maskreg).test(t.value)||(t.value=""):this.setCursorPosition(t.value.length,t)},l.prototype.setCursorPosition=function(e,t){if(t.focus(),t.setSelectionRange)t.setSelectionRange(e,e);else if(t.createTextRange){var s=t.createTextRange();s.collapse(!0),s.moveEnd("character",e),s.moveStart("character",e),s.select()}},l.prototype.setListeners=function(){this.el.addEventListener("input",this.mask.bind(this),!1),this.el.addEventListener("focus",this.mask.bind(this),!1),this.el.addEventListener("blur",this.mask.bind(this),!1)},l.prototype.getElement=function(e){if(void 0===e)return!1;if(this.isElement(e))return e;if("string"==typeof e){var t=document.querySelector(e);if(this.isElement(t))return t}return!1},l.prototype.isElement=function(e){return e instanceof Element||e instanceof HTMLDocument},window.FLS=!0,window.addEventListener("load",(function(){document.documentElement.classList.add("lock"),setTimeout((function(){document.documentElement.classList.remove("lock"),document.documentElement.classList.add("loaded")}),0)})),document.querySelector(".icon-menu")&&document.addEventListener("click",(function(e){t&&e.target.closest(".icon-menu")&&(((e=500)=>{document.documentElement.classList.contains("lock")?s(e):o(e)})(),document.documentElement.classList.toggle("menu-open"))})),function(){const t=document.forms;if(t.length)for(const e of t)e.addEventListener("submit",(function(e){s(e.target,e)})),e.addEventListener("reset",(function(e){const t=e.target;i.formClean(t)}));async function s(e,t){if(0===(e.hasAttribute("data-no-validate")?0:i.getErrors(e))){if(e.hasAttribute("data-ajax")){t.preventDefault();const s=e.getAttribute("action")?e.getAttribute("action").trim():"#",n=e.getAttribute("method")?e.getAttribute("method").trim():"GET",r=new FormData(e);e.classList.add("_sending");const i=await fetch(s,{method:n,body:r});if(i.ok){let t=await i.json();e.classList.remove("_sending"),o(e,t)}else alert("Ошибка"),e.classList.remove("_sending")}else e.hasAttribute("data-dev")&&(t.preventDefault(),o(e))}else{t.preventDefault();const s=e.querySelector("._form-error");s&&e.hasAttribute("data-goto-error")&&r(s,!0,1e3)}}function o(t,s=""){document.dispatchEvent(new CustomEvent("formSent",{detail:{form:t}})),setTimeout((()=>{if(e.popup){const s=t.dataset.popupMessage;s&&e.popup.open(s)}}),0),i.formClean(t),function(e){setTimeout((()=>{window.FLS&&console.log(e)}),0)}(`[Формы]: ${"Форма отправлена!"}`)}}(),function(){a=!0;const e=document.querySelector("header.header"),t=e.hasAttribute("data-scroll-show"),s=e.dataset.scrollShow?e.dataset.scrollShow:500,o=e.dataset.scroll?e.dataset.scroll:1;let n,r=0;document.addEventListener("windowScroll",(function(i){const a=window.scrollY;clearTimeout(n),a>=o?(!e.classList.contains("_header-scroll")&&e.classList.add("_header-scroll"),t&&(a>r?e.classList.contains("_header-show")&&e.classList.remove("_header-show"):!e.classList.contains("_header-show")&&e.classList.add("_header-show"),n=setTimeout((()=>{!e.classList.contains("_header-show")&&e.classList.add("_header-show")}),s))):(e.classList.contains("_header-scroll")&&e.classList.remove("_header-scroll"),t&&e.classList.contains("_header-show")&&e.classList.remove("_header-show")),r=a<=0?0:a}))}()})();